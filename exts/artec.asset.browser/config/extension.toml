[package]
# Semantic Versionning is used: https://semver.org/
version = "1.0.0"

# Lists people or organizations that are considered the "authors" of the package.
authors = ["Artec"]

# The title and description fields are primarly for displaying extension info in UI
title = "Browser of Models on Artec Cloud"
description="omni kit browser artec cloud models extension."

# URL of the extension source repository.
repository = ""

# Keywords for the extension
keywords = ['browser', 'asset', 'model', 'artec', 'cloud']

# Location of change log file in target (final) folder of extension, relative to the root.
# More info on writing changelog: https://keepachangelog.com/en/1.0.0/
changelog="docs/CHANGELOG.rst"

category = "services"
readme  = "docs/README.md"
preview_image = "data/preview.png"
icon = "data/artec_cloud.png"

[dependencies]
"omni.kit.browser.core" = {}
"artec.services.browser.asset" = {}
"omni.usd" = {}
"omni.services.client" = {}
"omni.kit.window.content_browser" = { optional=true }
"omni.kit.window.filepicker" = {}

# Main python module this extension provides, it will be publicly available as "import artec.asset.browser".
[[python.module]]
name = "artec.asset.browser"

[settings]
exts."artec.asset.browser".provider = "local://"
exts."artec.asset.browser".showCategory = ""
exts."artec.asset.browser".navigationAfterDownload = true
exts."artec.asset.browser".pageSize = 25
exts."artec.asset.browser".hoverWindow = false
exts."artec.asset.browser".singleProvider = true
exts."artec.asset.browser".appSettings = "/persistent/app/asset_store"
exts."artec.asset.browser".autoScroll = true

exts."artec.asset.browser".enable = true
exts."artec.asset.browser".providerId = "ArtecCLoud"
exts."artec.asset.browser".keepOriginalPageSize = true
exts."artec.asset.browser".maxCountPerPage = 24
exts."artec.asset.browser".minThumbnailSize = 256
exts."artec.asset.browser".modelsUrl = "http://cloud.artec3d.local/api/omni/1.0/projects"
exts."artec.asset.browser".cloudSearchUrl = "http://cloud.artec3d.local/api/omni/1.0/projects.json"
exts."artec.asset.browser".cloudAuthToken = "6175219139ea0a472d11ce46da2edecf"


exts."artec.asset.browser".searchUrl = "https://api.sketchfab.com/v3/search" # FIXME: remove me
exts."artec.asset.browser".authorizeUrl = "https://sketchfab.com/oauth2/authorize/" # FIXME: remove me
exts."artec.asset.browser".accessTokenUrl = "https://sketchfab.com/oauth2/token/" # FIXME: remove me
exts."artec.asset.browser".clientId = "eQcrihd32CeYmF9evsYEGXZr8vynHA82DW7SzJw2" # FIXME: remove me
exts."artec.asset.browser".clientSecret = "" # FIXME: remove me

[[test]]
dependencies = [
    "omni.kit.renderer.core",
    "omni.kit.renderer.capture",
    "artec.services.browser.asset",
    "omni.kit.browser.asset_provider.s3"
]

args = [
    "--no-window",
    "--/app/window/dpiScaleOverride=1.0",
    "--/app/window/scaleToMonitor=false",
]

stdoutFailPatterns.exclude = [
    "*gpu.foundation.plugin'>: Failed to load texture*", # Leak
    "*[gpu.foundation.plugin] Failed to load texture*",
    "*[gpu.foundation.plugin] Failed to read texture file*",
]
